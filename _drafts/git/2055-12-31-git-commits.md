---
title: Коммиты в git
description: >-
  Рассмотрим введение в коммиты как способ в git фиксировать изменения
author: alex
date: 2055-12-15 18:40:00 +0300
categories: [Git,Branches]
image:
  path: /assets/img/posts/main/branches.webp
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
  alt: Коммиты в git
---

В прошлой статье [https://lexusalex.site/posts/git-branches/](https://lexusalex.site/posts/git-branches/) мы пришли к пониманию, что такое ветки.

Сегодня посмотрим на коммиты в git.

## Коммит

Текущее состояние в определенный момент времени в git называют - **коммитом**.

Коммит обеспечивает просмотр истории репозитория. Все изменения в репозиторий вносятся строго через коммит.

Обычно коммиты делают разработчики, чтобы зафиксировать часть своей работы, но так бывает не всегда, иногда коммит создается автоматически, либо с помощью программы. Об этом мы поговорим в дальнейших статьях.

Коммиты можно делать часто или редко - это зависит от разработчика. Желательно делать коммит, когда проект находится в стабильном состоянии.

Коммит представляет собой набор изменений по отношению к предыдущему состоянию.

Если в проекте 1000 файлов и все они будут внесены в коммит, это и будет снимком состояния проекта, на текущий момент времени.

## Идентификаторы 

На коммит можно сослаться явным образом (абсолютным) и неявным способом (относительным).

Явный способ - это уникальный ID коммита, а неявный это символическая ссылка `HEAD`, которая указывает на последний коммит в ветке.

Рассмотрим подробнее типы имен коммитов.

## Абсолютное имя

Абсолютное имя, это `SHA-1` хеш объекта коммита.

Например: `98e1addacbfee2d477e1a881409d1f48b751bcc1`.

Его особенности:

- Хеш относится только к конкретному коммиту.
- Неважно где в истории будет находиться коммит.
- ID коммит уникален в рамках всего репозитория.
- 40 символов можно сократить, до уникального префикса внутри репозитория, например `98e1adda`.

Эта ссылка `четко` указывает на объект коммита в дереве объектов git.

## Относительное имя

Так же могут быть символические ссылки, которые указывают на коммит косвенно.

Каждая символическая ссылка имеет полное имя, которое начинается с `refs` в каталоге `.git`.

- `refs/heads` - локальные ветки
- `refs/remotes` - удаленные ветки отслеживания
- `refs/tags` - теги

Например, имя локальной представлено как `refs/heads/main`, а удаленной ветки отслеживания `refs/remotes/origin/main`, а тег как `refs/tags/v0.1.1`.

При поиске ссылки можно использовать полноценное имя или ее псевдоним.

Внутри git использует при поиске, использует правило первого совпадения согласно перечню:

- `.git`
- `.git/refs`
- `.git/refs/tags`
- `.git/refs/heads`
- `.git/refs/remotes`
- `.git/refs/remotes/../HEAD`.

В git по умолчанию есть следующие символические ссылки:

- `HEAD` - последний коммит в ветке. При переключении веток `HEAD` обновляется и указывает на последний коммит переключенной ветки.
- `ORIG_HEAD` - предыдущая версия `HEAD`, используется для отката к предыдущему состоянию слиянию и сбросу.
- `FETCH_HEAD` - используется для удаленных репозиториев, куда пишутся ID извлекаемых веток
- `MERGE_HEAD` - Используется при слиянии веток.

Мы можем ссылаться относительно последнего коммита в ветке, по истории вверх, например:

````shell
git show-branch --more=100
! [branch-1] commit 6
 ! [branch-2] commit 3
  ! [branch-3] commit 7
   * [branch-4] commit 8
    ! [main] commit 1
-----
   *  [branch-4] commit 8
  +*  [branch-3] commit 7
  +*  [branch-3^] commit 4
 ++*  [branch-2] commit 3
+     [branch-1] commit 6
+     [branch-1^] commit 5
+++*  [branch-2^] commit 2
+++*+ [main] commit 1
````

## История коммитов

Одна из важных вещей - это просмотр истории. Для этого используется команда `git log`.

Если просто выполнить команду, то будут выведены коммиты в обратном хронологическом порядке, от последнего коммита

````shell
git log
commit 5adb352052433ef484e5979be8800dd004e3ce44 (HEAD -> branch-4)
Author:  <>
Date:   Sun Dec 15 17:45:04 2024 +0300

    commit 8
...
````

Чтобы более детально вывести информацию, нужно задать точку откуда смотреть историю

````shell
git log branch-3
````

Также можно сократить кол-во выводимых коммитов, например выведем 1 коммит

````shell
git log branch-3 -1
````

Более подробно команду `git log` рассмотрим отдельно, так как много опций и нюансов.



