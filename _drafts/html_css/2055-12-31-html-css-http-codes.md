---
title: HTTP. Коды состояний ответа
description: >-
  Коды состояний ответа веб сервера
author: alex
date: 2056-01-02 23:30:00 +0300
categories: [Html,HTTP]
image:
  path: /assets/img/posts/main/html.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
  alt: Коды состояний ответа веб сервера
---

## Коды состояний ответа http

### Информационные

Информационные коды, которые информируют о процессе передачи.

В версии прокола `http/1.0` такие сообщения игнорируются. Поддерживаются с `http/1.1`

#### 100 Continue

Запрос получен, процесс продолжается, сервер получил запрос и клиент может продолжать отправку тела запроса.

Может использоваться например, чтобы проверить можно ли загрузить файл большого объема.

Чтобы сервер проверил заголовок запроса, клиент должен отправить специальный заголовок

````http
Expect: 100-continue
````

Клиент отправляет на сервере этот заголовок, не дожидаясь ответа.
Сервер получает заголовки и анализирует их.

Если сервер понимает, что готов принять запрос он отправляет в ответ `100 Continue`, после этого клиент отправляет тело запроса

Если сервер видит проблему он, сразу отправляет ответ с кодом ошибки, например:

- `401 Unauthorized` (не авторизован)
- `417 Expectation Failed` (сервер не может удовлетворить требование в заголовке `Expect`)
- `302 Found` (перенаправление)

Для чего это может быть нужно. Нет смысла отправлять файл `100GB`, если сервер не готов его принять и все равно будет отклонен.

#### 101 Switching Protocol

Указывает протокол, который сервер переключает используя клиентский запрос `Upgrade.`
Клиент отправляет `http` запрос, но добавляет в него специальные заголовки, которые сообщают о желании перейти на другой протокол.
Если сервер поддерживает запрошенный протокол, он отвечает кодом `101 Switching Protocols`. В ответе так же есть информация какой протокол будет использоваться далее.
Как только пришел `101` статус, соединение закрывается, и открывается новое соединение, работающее по новым правилам.

Если по какой-то причине не получилось переключить протокол, вернется стандартные коды ошибок, например

- `400 Bad Request`
- `505 HTTP Version Not Supported`

Заголовок `Upgrade` от клиента, указывает на какой протокол, хочет переключиться клиент, например `websocket`. Сервер подтверждает, что переключение произошло.
Заголовок `Connection` от клиента, сообщает что клиент хочет обновить соединение, значение этого заголовка `Upgrade`.
В ответе от сервера так же должно быть значение `Upgrade`.

Основной сценарий использования - это `websocket`, который создает постоянный двунаправленный канал связи между клиентом и сервером.

Именно для переключения с `http` на более эффективный протокол используется статус `101`.

Пример запроса и ответа одного из онлайн чатов на сайте на переключение протокола.

Запрос

````http
GET /9RdgOEtiz0?27c82a8d4a2f3b4d HTTP/1.1
Host: ...
Connection: Upgrade
Upgrade: websocket
````

Ответ

````http
HTTP/1.1 101 Switching Protocols
Connection: Upgrade
Upgrade: websocket
Server: hand/3.7
````

После этого клиент и сервер могут общаться между собой в формате `websocket` не используя `http`.

`101` статус является технологической основой для современных интерактивных веб-приложений, работающих в реальном времени.

#### 102 Processing

Главная задача `102` кода предотвратить тайм-аут на стороне клиента. Сервер уведомляет клиента ,что запрос принят, но его обработка еще не завершена.

То есть например клиент отправляет долгий запрос, сервер сразу же отвечает `102 Processing`, что его обработка займет некоторое время, чтобы клиент продолжал ждать не разрывал соединение.

После того как сервер выполнил долгую операцию, сервер отправляет финальный ответ, `200`,`201` или ошибку `5..`.

Еще раз главное

1. Клиент отправил долгий запрос
2. Сервер сразу вернул `HTTP/1.1 102 Processing`
3. Идет долгая обработка запроса сервером
4. Сервер вернул `HTTP/1.1 201 Created` с телом ответа

Как уже писал цель этого статуса поддержание "живого" соединения для длительных операций.

Код `102` полезен при работе с протоколом `WebDAV`. Этот протокол используется для удаленной работы с файлами
Так же может быть полезен, при длительных `api` запросах, например генерация отчетов, обработка видеофайлов, анализ данных и сложных вычислений.
Загрузка и обработка больших файлов.

#### 103 Early Hints

`103` предназначен для использования с заголовком `Link`.

Это временный ответ от сервера, который отправляется до того, как будет готов окончательный ответ. Он не содержит тело ответа, но может включать заголовки.

Сервер как только понимает, какие ресурсы понадобятся для страницы еще до загрузки `html` может отправить промежуточный ответ `103 Early Hints` с заголовком `Link`.

Браузер по-прежнему продолжает ждать основной ответ и уже начинает делать предзагрузку ресурсов.

Такой подход сокращает время загрузки страницы, так как критические ресурсы начинают скачиваться раньше чем загрузится `html`. Тут полностью управление ложится на браузер.

Нужно учесть, что ответ со статусом `103` не кешируется.

### Успешные ответы

Означают, что запрос от клиента был принят, обработан и завершен.

#### 200 OK

Самый распространенный ответ браузера, говорит о том что запрос выполнился успешно.

Этот код может возвращаться в результате:

- загрузка страницы
- получение данных по `api`
- отправка формы
- загрузка стилей и скриптов

Ответ может по умолчанию кешироваться

#### 201 Created

Запрос был выполнен успешно и привел к созданию нового ресурса.

Один из вариантов использования - это ответ на `POST` запрос.

Например: 

- Добавление комментария
- Добавление статьи
- Создание пользователя
- Создание заказа

При этом очень важен заголовок `Location`, в нем должен быть `url` адрес созданного ресурса. Так же возвращается тело ответа с информацией о созданном ресурсе.

Рекомендуется для создания чего-либо, у чего появится собственный `url` использовать `201 Created`.

Часто ответ возвращается, при использовании метода `PUT`.

#### 202 Accepted

Означает, что запрос получен, но еще не обработан, или обрабатывается в данное время.

Может использоваться для асинхронных операций, то есть сервер сразу отвечает `202` и продолжает выполнять операцию в фоне.

Например, где это может быть полезно:

- Обработка видеофайлов с последующей конвертацией их в разные форматы.
- Генерация больших отчетов
- Массовые операции
- Импорт/Экспорт данных
- Сложные вычисления

В заголовке `Location` `url` по которому клиент может проверить статус выполнения операции.

Тело ответа, часто передает в `json` формате.

````json
{
  "message": "Ваш запрос на генерацию отчета принят и находится в обработке.",
  "taskId": "abc-123-xyz",
  "status": "processing",
  "statusUrl": "/api/v1/tasks/abc-123-xyz/status"
}
````

Как клиент получил ответ от сервера `202`, операция не является завершенной.

Что может сделать клиент:

- Распарсить ответ
- Периодически отправлять `GET` запрос, чтобы узнать о статусе задачи, в идеале с задержкой в 5-10 сек.
- Обработать финальный результат, либо `200`,`4..` или `500`

#### 203 Non-Authoritative Information 
