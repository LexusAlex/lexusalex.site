---
title: Nginx. Принципы работы
description: >-
  Принципы работы веб-сервера nginx
author: alex
date: 2026-01-03 23:30:00 +0300
categories: [Html,nginx]
image:
  path: /assets/img/posts/main/html.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
  alt: Принципы работы веб-сервера nginx
---

## Версии nginx

Есть две версии `nginx`

- Основная - это последняя версия `nginx` с новыми функционалом (на текущий момент (январь 2026) это `1.29.4`)
- Стабильная - это версия, которая нацелена на стабильность и безопасность. Новый функционал не добавляется. Рекомендуется ставить ее. (на январь 2026 это [https://nginx.org/ru/CHANGES.ru-1.28](https://nginx.org/ru/CHANGES.ru-1.28))

Все остальные версии являются устаревшими

> На рабочих серверах рекомендуется использовать стабильную версию
{: .prompt-info }

## Master Worker

`nginx` использует модель главный процесс `master` и несколько рабочих процессов `worker`

Например, увидим это сразу все процессы `nginx`

````shell
ps -a | grep nginx
1 root      0:00 nginx: master process nginx -g daemon off;
29 nginx     0:00 nginx: worker process
30 nginx     0:00 nginx: worker process
31 nginx     0:00 nginx: worker process
32 nginx     0:00 nginx: worker process
````

- `master` процесс
  - Запускается от `root`
  - Читает и проверяет конфиги
  - Слушает порты `80` и `443`
  - Управляет `worker` процессами
  - Обрабатывает сигналы, например при мягкой перезагрузки `nginx -s reload` соединения не теряются
- `worker` процесс
  - Запускается от имени обычного пользователя `nginx`
  - Каждый `worker` работает независимо и обрабатывают все сетевые соединения
  - Кол-во `worker_processes` обычно равно ядрам `CPU`, в примере выше их 4

Каждый рабочий процесс использует механизм опроса событий. Постоянно в цикле опрашивает систему на возможные события.

Как примерно идет обработка запроса:

- Получили запрос от клиента
- Рабочий процесс отправляет запрос на бекенд, например `php-fpm`
- Освободившись он сразу же обрабатывает другой запрос
- Когда бекенд ответил, об этом уведомляется рабочий процесс
- Рабочий процесс читает ответ и отправляет его клиенту

Благодаря такой архитектуре, один рабочий процесс может одновременно обрабатывать тысячи соединений.

> ВАЖНО. Мастер-процесс НЕ обрабатывает сетевые запросы от клиентов. Его работа это управление.
{: .prompt-info }

## Роли сервера

- Отдача статики. Базовая функция сервера отдавать статические файлы как они есть `html`,`css`,`js`,изображения, видео
- Обратный прокси. `nginx` сам решает какому приложению дальше отдать запрос. `PHP`, `Python`, `Ruby`, `Node.js`
- Балансировщик нагрузки. Если бекендов несколько, `nginx` может распределять нагрузку между ними по кругу.

