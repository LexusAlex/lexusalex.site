---
title: Работа с данными в mysql/mariadb
description: >-
  Разберем основные операторы с которыми работаем в mysql/mariadb
author: alex
date: 2055-06-02 09:00:00 +0300
categories: [Sql, Mysql]
tags: [mysql]
---

## SELECT - выборка данных

Наверное самая частая операция в `mysql` или в `mariadb` - это выборка среза данных из одной или нескольких таблиц.

Первое, что нужно понять, оператор `SELECT` всегда возвращает таблицу, даже если это просто вычисление.

К примеру в выражении:

````sql
SELECT 1 + 1 as sum;
````

Будет подсчитанный ответ в виде таблицы

| sum |
|-----|
| 2   | 

Как можно видеть,`sql` можно использовать как калькулятор.

В базовом варианте можно вернуть все данные из одной таблицы, сколько бы их не было.

````sql
SELECT * FROM `Alerts`;
````

Так же можно указать сразу несколько таблиц, перечислив их через запятую.

````sql
SELECT * FROM `audit_kp`,`cron`,`events`
````

Здесь еще пока нет условия, поэтому результаты будут склеены из всех переданных таблиц

Допустим в таблицах у нас следующее количество записей:

- 5
- 2
- 11

В итоговом результате будет 110 записей (данные `audit_kp` + `cron` + `events`), склеенных в одну строку результата.

При этом от порядка перечисления таблиц зависит, что за чем будет идти. 

Но так бездумно запрашивать все столбцы всех таблиц, не эффективно.

Перечислим только нужные нам столбцы.

Например, нам нужны только идентификаторы из 3 таблиц.

Поля через запятую можно выбирать с указанием таблицы или без если используется одна таблица.

````sql
SELECT audit_kp.id,cron.id,`events`.id FROM `audit_kp`,`cron`,`events`;
-- id id(1) id(2)
````

Но вот тут не понятно, идентификаторы к какой таблице относятся в итоговой выборке, для этого существуют алиасы.

Алиасы могут быть у таблицы, поля, либо у самой выборке.

Если алиас был объявлен у таблицы, его можно использовать во всем запросе.

````sql
SELECT t1.id column1,t2.id column2,t3.id column3 FROM `audit_kp` t1,`cron` t2,`events` t3
-- Или указать через AS, что необязательно
SELECT t1.id AS column1,t2.id AS column2,t3.id AS column3 FROM `audit_kp` AS t1,`cron` AS t2,`events` AS t3
````

Алиасы нам могут быть полезны:

- При работе с несколькими таблицами.
- Если используем функции.
- Чтобы сокрытить запрос.
- Если объединяем столбцы.

Сейчас, наш запрос в примерах бесполезен, так как мы не получаем полезные данные, а склеиваем все в один.

Добавим условие выборки.





UPDATE `` SET `sum` = 2 WHERE `sum` = 2 LIMIT 1;
INSERT INTO `` (`sum`) VALUES (2);

https://www.dev-notes.ru/articles/eloquent/use-exists-instead-of-count/
https://www.dev-notes.ru/articles/database/mysql-joins-tutorial-with-examples/
