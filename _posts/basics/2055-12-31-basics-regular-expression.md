---
title: Регулярные выражения
description: >-
  Постепенно разберемся как работают регулярные выражения перейдем на реальных примерах
  от простого к сложному 
author: alex
date: 2021-06-02 09:00:00 +0300
categories: [Basics Regexp]
tags: [regular Expression]
---

TODO - написать введение

Регулярные выражения используются повсеместно это редакторы кода, различные языки программирования. 
Уметь их использовать очень помогает в работе.

## Базовый вариант

Базовый вариант регулярных выражений это простой поиск текста, где символы соответствуют сами себе, за исключением специальных символов. 

По умолчанию мы ищем только одно вхождение и регистр букв важен.

> Примеры ниже будут идти в две строки
> - "Регулярное выражение"
> - "Строка поиска и результат подсвеченный цветом"
{: .prompt-info }
 
Например:

- `a`
- <span style="background-color:#7AE;color:white">а</span>ааааааа

### Поиск части слова

Или же поиск по части слова.

- `ве`
- При<span style="background-color:#7AE;color:white">ве</span>т

## Разделитель

Само регулярное выражение состоит из строки-шаблона.

В роли ограничителей например могут выступать символы:

- `/` 
- `~` 
- `@` 
- `;` 
- `%`
- `#`

Пример регулярного выражения с разделителем:
 
- `/строка/`
- Тестовая <span style="background-color:#7AE;color:white">строка</span>

Теперь представим есть строка **телефоны и на телефоне и не тот телефон**, нужно найти все вхождения слова _телефон_:

- `/телефон/`
- <span style="background-color:#7AE;color:white">телефон</span>ы и на телефоне и не тот телефон

Но мы найдем только первое вхождение.

Для того чтобы найти все вхождения с регулярным выражением нужно применить модификатор `g`, что значит глобальный поиск по всей строке.

Модификаторы указываются после разделителя в конце:

- `/телефон/g`
- <span style="background-color:#7AE;color:white">телефон</span>ы и на <span style="background-color:#7AE;color:white">телефон</span>е и не тот <span style="background-color:#7AE;color:white">телефон</span>

> Модификаторы или флаги модифицируют поведение регулярного выражения
{: .prompt-info }

Уже кое-что, но этого мало, ведь гибкость регулярных выражений раскрывается когда 
мы работаем с символьными классами.

## Символьные классы

Символьный класс - это комбинация символов определенного набора в квадратных скобках.

К примеру найдем возможные окончания строки **телефон**:

- `/телефон[еы]/g`
- <span style="background-color:#7AE;color:white">телефоны</span> и на <span style="background-color:#7AE;color:white">телефоне</span> и не тот телефон

Но как найти просто **телефон**. 
Как сказать что символы символьного класса могут быть, а могут и не быть. 
Для этого существует квантификатор `?`. 

О квантификаторах поговорим ниже.

Для примера выше добавим его после символьного класса.

- `/телефон[еы]?/g`
- <span style="background-color:#7AE;color:white">телефоны</span> и на <span style="background-color:#7AE;color:white">телефоне</span> и не тот <span style="background-color:#7AE;color:white">телефон</span>

Теперь нашли все возможные варианты.

- `/[абвгдеёжзиклмн]/` 


Внутри могут быть литералы, которые меняют поведение символьного класса.

> Символьные классы могут быть в любом месте выражения.
{: .prompt-info }






https://habr.com/ru/articles/545150/
http://sajgak.ru/site/php/shpargalka-regularnie-virageniya-pcre/
https://devanych.ru/technologies/shpargalka-po-regulyarnym-vyrazheniyam
  


## Модификаторы

Модифицировать дефолтное поведение регулярных выражений можно с помощью флагов (модификаторов) они указываются после строки-шаблона.

Основные из них:

- `g` ищет все совпадения, а не только первое вхождение
- `i` регистронезависимый поиск
- `m` мультистроковость
- `u` поддержка юникода



## Символьные классы
 
Комбинация символов в квадратных скобках

Найдем в тексте все упоминания телефона.

````text
телефоны и на телефоне и не тот телефон
````

> Символьные классы могут быть в любом месте выражения.
{: .prompt-info }

### Виды символьных классов

- `[абв]` - любой из указанных символов `aбв`.
- `[а-яА-Я]` - два диапазона символов от a до я и от А до Я
- `[0-9]` - числа от 0 до 9
- `[^0-9]` - не число
- `\d` - целое число `[0-9]`
- `\D` - символ, кроме числа `[^0-9]`
- `\s` - любой пробельный символ `[\f\n\r\t\v ]`
- `\w` - цифра, буква и нижнее подчеркивание `[a-zA-Z0-9_]`


## Квантификаторы

- `?` - 0 или 1 раз
- `+` - 1 или более раз
- `*` - 0 или более раз

## Диапазон ожидаемых значений

- `{1}` - точное ко-во совпадений
- `{1,9}` - от 1 до 9
- `{0,1}` - 0 или 1
- `{1,}` - 1 или более раз
- `{0,}` - 0 или более раз

## Группа 

- `()`
Примеры:

| Строка поиска                                   | Выражение                     | Результат                                             | Описание                            |
|-------------------------------------------------|-------------------------------|-------------------------------------------------------|-------------------------------------|
| `гад сад рад`                                   | `/[гср]ад/gu`                 | **гад сад рад**                                       | Нашли все слова                     |
| `тест не тест место`                            | `/[е]ст/gu`                   | т**ест** не т**ест** м**ест**о                        | Нашли слово ест                     | 
| `какая-то строка`                               | `/[а-я- ]/gu`                 | **какая-то строка**                                   | Диапазон символов                   | 
| `12345`                                         | `/[0-9]/gu`                   | **12345**                                             | Поймаем все числа                   | 
| `12345абвкенг.`                                 | `/[0-9a-я.]/gu`               | **12345абвкенг.**                                     | И цифры и буквы и точка             | 
| `Договор№132А Договор№а123 договор не договора` | `/[дД]оговор№[a-яА-Я0-9]+/gu` | **Договор№132А** **Договор№а123** договор не договора | Найдем номера договоров             | 
| `123124dfg.;rt457!`                             | `/[^0-9]/gu`                  | 123124**dfg.;rt**457 **!**                            | Не числа                            | 
| ` hggh `                                        | `/\s/gu`                      | hggh                                                  | Нашли пробелы по краям              | 
| `русская строка_!5`                             | `/\w/gu`                      | **русская** **строка_**!**5**                         | Буква,цифра и _                     | 
| `880034545`                                     | `/\d+/u`                      | **880034545**                                         | Числа встречающиеся 1 или более раз | 
| `989++7`                                        | `/\++/u`                      | 989 **++** 7                                          | Символ `+` 1 или более раз          | 

https://habr.com/ru/articles/349860/
https://habr.com/ru/articles/545150/
http://sajgak.ru/site/php/shpargalka-regularnie-virageniya-pcre/

https://www.youtube.com/watch?v=ozFNilK4qrc&t=1290s

https://regex101.com/

https://devanych.ru/technologies/shpargalka-po-regulyarnym-vyrazheniyam
