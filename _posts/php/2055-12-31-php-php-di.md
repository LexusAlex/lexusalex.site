---
title: Библиотека php-di
description: >-
  Библиотека php-di
author: alex
date: 2055-12-31 20:30:00 +0300
categories: [Php, Libraries]
tags: [php]
image:
  path: /assets/img/posts/php1.png
  alt: Контейнер внедрения зависимостей в php
---

В предыдущей статье [https://lexusalex.site/posts/php-dependency-injection-container/](https://lexusalex.site/posts/php-dependency-injection-container/) мы поняли что такое контейнер внедрения зависимостей, разобрали, для чего он может быть полезен. 

Сегодня на примере библиотеки [https://php-di.org/](https://php-di.org/)
посмотрим на практике, как использовать контейнер внедрения зависимостей. 

## Установка

````shell
# 
composer require php-di/php-di
````

Базовый пример

````php
Class One
{
    public function __construct(){
        echo "One";
    }
}

Class Two
{
    public function __construct(){
        (new One());
        echo "Two";
    }
}

Class Three
{
    public function __construct(){
        (new Two());
        echo "Three";
    }
}

$container = new DI\Container([
    Three::class => function($container){new Three();}
]);

$container->get(Three::class); // OneTwoThree
````

````php
class Header
{
   public function __construct()
   {
     echo "Header";
   }
}

class Footer
{
    public function __construct()
    {
        echo "Footer";
    }
}

class Main
{
    public function __construct(Header $header, DivMain $divMain, Footer $footer){

    }
}

class DivMain
{
    public function __construct()
    {
        echo "Div Main";
    }
}

class Index
{
   public function __construct(Main $main){
       
   }
}

$builder = new \DI\ContainerBuilder();
$builder->addDefinitions([
    Header::class => static function (){return new Header();},
    DivMain::class => static function (){return new DivMain();},
    Footer::class => static function (){return new Footer();},
    Main::class => static function (ContainerInterface $container){
        return new Main($container->get(Header::class),$container->get(DivMain::class), $container->get(Footer::class));
    },
    Index::class => static function (ContainerInterface $container){
        return new Index($container->get(Main::class));
    }

]);

$build = $builder->build();


print_r($build->get(Index::class));
````

https://habr.com/ru/articles/327746/
https://github.com/codedokode/pasta/blob/master/arch/di.md
