---
title: Используем nestjs
author: alex
date: 2024-12-31 18:00:00 +0300
categories: [Nestjs]
---


Guards NestJS https://habr.com/ru/articles/753882/
Руководство по nest часть 1 https://habr.com/ru/companies/timeweb/articles/663234/
Руководство по nest часть 2 https://habr.com/ru/companies/timeweb/articles/666470/
Частично переведенная дока https://nestjs.ru/techniques/database
mongoose https://my-js.org/docs/guide/mongoose

Приблизительный план

Рассмотрим использование nest.js в практическом плане, без воды

## Установка

Я веду всю разработку в docker

### Декораторы

https://habr.com/ru/companies/docsvision/articles/310870/

### Fastify или express

https://www.unix-lab.org/posts/nestjs-start/
https://evogeek.ru/articles/93891/

````shell
docker compose run --rm node-cli npm i --save @nestjs/platform-fastify
````

## Конфигурация
 
Нужно научить nest работать файлами `.env`, для этого поставим пакет.

Хотя мы работаем в docker, который очень удобно позволяет работать, полезно знать как это делать

```shell
docker compose run --rm node-cli npm i --save @nestjs/config
#  На май 2024 версия 3.2.2
```

### Подключение штатным образом

Подключим в глобальный модуль, тем самым укажем что нужно парсить файлы с переменными окружения

````typescript
@Module({
  imports: [
    ConfigModule.forRoot()
  ],
  controllers: [AppController],
  providers: [AppService],
})
````

Создадим в корне проекта фаил `.env` с переменными окружения

````
TEST=12345
````

Используем 

````typescript
@Controller()
export class AppController {
  constructor(private configService: ConfigService) {
  }

  @Get('/')
  async get() {
    return {result: this.configService.get<string>("TEST")}
  }
}
````

### Подключение через docker

Здесь все проще, в файле `docker-compose-prod.yml`, добавляем переменные окружения

````yaml
environment:
      NODE_ENV: development
      MY_TEST: 75765643456456456
````

Используем

````typescript
@Controller()
export class AppController {
  constructor(private configService: ConfigService) {
  }

  @Get('/')
  async get() {
    return {result: this.configService.get<string>("MY_TEST")}
  }
}
````

### production and development

Расписать что и как делать

### Коды ответов

## Модуль
## Интеграции

Nest не привязан не к какой базе данных, можно ставить любую

### MongoDb

Неплохо бы разобрать в кратце как работать с mongoose

````shell
npm i @nestjs/mongoose mongoose
# На май 2024 mongoose 8.3.4 @nestjs/mongoose 10.0.6
````
### TypeORM
### Prisma
